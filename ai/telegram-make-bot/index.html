<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="The side effect of my adventure in AI Devs was the creation of a Telegram bot, which serves as an interface for communication with Zelda* - my private AI assistant."><title>Telegram Bot + Make as an interface for the AI assistant</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://koscielniak.pro/icon.png><link href=https://koscielniak.pro/styles.9795826ea4fa61978dfd826a4365a859.min.css rel=stylesheet><link href=https://koscielniak.pro/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://koscielniak.pro/js/darkmode.65e02719d0d9967e13e7b6186bd55800.min.js></script>
<script src=https://koscielniak.pro/js/util.5e39932758f9ecaf45fd54506ed61416.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://koscielniak.pro/js/popover.6da9b273c092cc16fc1aa904d71a2163.min.js></script>
<script src=https://koscielniak.pro/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://koscielniak.pro/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://koscielniak.pro/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://koscielniak.pro",fetchData=Promise.all([fetch("https://koscielniak.pro/indices/linkIndex.399a5ca7ad5b5d79c56ca7bbba7ff6cb.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://koscielniak.pro/indices/contentIndex.b0608d05f85229a362c409bb5a3093e5.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://koscielniak.pro",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://koscielniak.pro",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'‚Äô':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/koscielniak.pro\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://koscielniak.pro/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://koscielniak.pro>üçç koscielniak.pro</a></h1><div class=spacer></div><div id=search-icon><p>‚åò+K</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Telegram Bot + Make as an interface for the AI assistant</h1><p class=meta>Last updated
Unknown
<a href=https://github.com/kkoscielniak/the-garden/ai/telegram-make-bot.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#creating-a-bot-in-telegram>Creating a bot in Telegram</a></li><li><a href=#creating-a-webhook-in-make>Creating a webhook in Make</a></li><li><a href=#responding-to-messages>Responding to messages</a></li><li><a href=#customizing-the-bot>Customizing the bot</a></li><li><a href=#bonus-integration-with-ios-via-shortcuts>Bonus: Integration with iOS via Shortcuts</a></li><li><a href=#bonus-2-integration-with-macos-via-keyboard-maestro>Bonus #2: Integration with macOS via Keyboard Maestro</a></li><li><a href=#whats-next>What&rsquo;s next?</a></li><li><a href=#resources>Resources</a></li></ol></nav></details></aside><p>The side effect of my adventure in AI Devs was the creation of a Telegram bot, which serves as an interface for communication with Zelda* - my private AI assistant.</p><p>I chose Telegram because of its presence on both phone and computer, and even in the car, through CarPlay. It is also relatively easy to integrate with Make, on which my Zelda is based.</p><p>I will show you how to connect Telegram with Make.com and respond to messages sent to the bot in automation scenarios. I also found an interesting patent for quickly launching a chat with the bot on iOS (to my knowledge, the technique presented should also work on Android - <em>I hope I got you covered</em>) and macOS.</p><p>The final result for me looks like
<a href=https://koscielniak.pro/assets/0_part.mp4 rel=noopener>this</a>.</p><a href=#creating-a-bot-in-telegram><h2 id=creating-a-bot-in-telegram><span class=hanchor arialabel=Anchor># </span>Creating a bot in Telegram</h2></a><p>Creating a bot in Telegram is done through&mldr; Telegram. You can use both the mobile and desktop Telegram clients for this.</p><p>First, you need to use a bot with the charming name
<a rel=noopener class="internal-link broken" data-src=telegram.me/botfather><em>BotFather</em></a> (you can also just click on the link) and send him a message:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>/newbot
</span></span></code></pre></td></tr></table></div></div><p>Telegram will ask for a name for the bot. The name will also be its <em>@handler</em> and must end with the suffix <code>Bot</code>. For the purposes of this article, I named it <code>SmartBotAndrzejKobraBot</code>.</p><blockquote><p>üí° It&rsquo;s worth naming the bot in such a way that it&rsquo;s not easy to find. I&rsquo;ll explain why soon.</p></blockquote><blockquote><p>This won&rsquo;t necessarily be the bot&rsquo;s <em>final name</em>, so don&rsquo;t worry, a random string of characters will do too üòÖ</p></blockquote><p>In response, we will receive a token for communication with the HTTP API, which we will use in Make. The direct link to the bot will also be useful later (in my case it is <code>t.me/SprytnyBotAndrzejaKobryBot</code>).</p><p><img src="/assets/Screenshot 2023-05-24 at 20.37.45.png" width=auto></p><a href=#creating-a-webhook-in-make><h2 id=creating-a-webhook-in-make><span class=hanchor arialabel=Anchor># </span>Creating a webhook in Make</h2></a><p>To integrate Telegram with our automations, we will use a ready-made module in Make called <strong><em>Telegram Bot</em></strong> and its trigger <strong><em>Watch Updates</em></strong>.</p><p>To configure the connection, we only need the token sent to us by BotFather:</p><p><img src="/assets/Screenshot 2023-05-24 at 20.48.11.png" width=auto></p><p>Thanks to this simple step, our scenario can listen for new messages directed to <em>SprytnyBotAndrzejaKobry</em> üòÖ</p><blockquote><p>üí° I encourage you to run the scenario once at this point and send anything to the newly created bot, so that Make knows what data to expect.</p></blockquote><a href=#responding-to-messages><h2 id=responding-to-messages><span class=hanchor arialabel=Anchor># </span>Responding to messages</h2></a><p>Making the bot respond to our messages is even easier than listening, and basically comes down to using the <strong>_Telegram Bot*</strong> -> <strong>_Send a Text Message or a Reply*</strong> module.</p><p>In this module, the <em>Chat ID</em> should be selected as the chat identifier from the incoming message in the trigger:</p><p><img src="/assets/Screenshot 2023-05-24 at 20.58.11.png" width=auto></p><p>The <em>Text</em> value is, of course, the content of the bot&rsquo;s response.</p><p>What happens between sending a message <strong>to the bot</strong> and receiving its response is up to you üôÇ It can be the direct use of any Make module, but also calling a webhook and <em>responding</em> with the returned response.</p><p>Securing the bot against unauthorized use I mentioned earlier that it&rsquo;s important to name the bot in a way that makes it difficult to identify. This is because (at least to my current knowledge) <strong>every bot on Telegram is a public bot</strong>, and theoretically any user of the messaging app could find and chat with it. This creates a risk that someone could gain access to our automation scenario, which is definitely something we don&rsquo;t want.</p><p>Choosing an ambiguous name for our bot is just the first line of defense against unauthorized use. But we can add another.</p><p>Thanks to the <strong><em>Router</em></strong> module in Make, we can filter incoming messages and return responses only when certain conditions are met. A relatively safe technique seems to be checking the Chat ID - it&rsquo;s different for each user, so in theory it should be impossible for a third party to use our bot for nefarious purposes. We can combine this with our name, surname, username, or add another method of verifying our identity using other Make modules, a secret word present in the message content, etc.</p><p>The downside of this solution is that from time to time we may need to update our filter, for example when we delete the entire chat with the bot on Telegram and create a new one.</p><p><img src="/assets/Screenshot 2023-05-24 at 21.20.38.png" width=auto></p><blockquote><p>üí° We can also use the <strong>Router</strong> to respond with a not-so-nice message to our <em>uninvited guests</em> in case of failed authorization üòâ</p></blockquote><a href=#customizing-the-bot><h2 id=customizing-the-bot><span class=hanchor arialabel=Anchor># </span>Customizing the bot</h2></a><p>Our newly created bot is still quite generic. It has a poor name and lacks any character. Fortunately, we can still ask the &ldquo;godfather&rdquo; of bots (after all, it&rsquo;s BotFather üòÇ) for a favor. Let&rsquo;s use it to change the name displayed on the contact list:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>/mybots
</span></span></code></pre></td></tr></table></div></div><p>After selecting our bot from the list, additional options will appear:
<img src="/assets/Screenshot 2023-05-24 at 21.33.29.png" width=auto></p><p>By selecting <em>Edit Bot</em>, we will have the option to change its name, contact picture, description, etc. By clicking on the appropriate option (e.g. Edit Name), we will be asked to provide a new name.</p><blockquote><p>üí° The <em>Edit Botpic</em> option is used to change the profile picture/contact photo.</p></blockquote><p>In this way, our bot will stand out a bit on the contact list:
<img src="/assets/Screenshot 2023-05-24 at 21.37.52.png" width=auto></p><a href=#bonus-integration-with-ios-via-shortcuts><h2 id=bonus-integration-with-ios-via-shortcuts><span class=hanchor arialabel=Anchor># </span>Bonus: Integration with iOS via Shortcuts</h2></a><p>Well, that&rsquo;s nice. The only problem for me right now is the need to open Telegram &ldquo;manually&rdquo; and select the bot from the contact list. That&rsquo;s one step too many.</p><p>Fortunately, we can easily prepare a Shortcut that will open a direct chat with the Assistant immediately in Telegram.</p><p>To do this, we will use the <strong><em>Open URLs</em></strong> action in Shortcuts, setting the URL value to the same URL that BotFather greeted us with when creating the bot (for me: <code>t.me/SprytnyBotAndrzejaKobryBot</code>).</p><p><img src=/assets/IMG_FB6D7DA7CE3E-1.jpeg width=auto></p><p>The first time we use the Shortcut, we will need to allow the bot URL to be opened. After that, there will be no problem üôÇ</p><p>We can attach such a Shortcut to the Home Screen, as well as give it any name and icon.</p><blockquote><p>üí° On Android, this simple bot link should also work. I leave it up to you to attach it to an icon on the desktop üòâ</p></blockquote><a href=#bonus-2-integration-with-macos-via-keyboard-maestro><h2 id=bonus-2-integration-with-macos-via-keyboard-maestro><span class=hanchor arialabel=Anchor># </span>Bonus #2: Integration with macOS via Keyboard Maestro</h2></a><p>The Shortcut presented above works on macOS, but it also unnecessarily opens an additional browser tab. Fortunately, this can be bypassed if you use Keyboard Maestro. Simply create a macro consisting of a single <strong><em>Open URL</em></strong> action and set the <em>with</em> parameter to Telegram.</p><p><img src="/assets/Screenshot 2023-05-25 at 10.27.54.png" width=auto></p><p>Thanks to this trick, not only will we skip the browser when opening the bot, but we will also be able to attach it to any keyboard shortcut (in my case, it&rsquo;s <code>Hyper + X</code>), Stream Deck, etc.</p><a href=#whats-next><h2 id=whats-next><span class=hanchor arialabel=Anchor># </span>What&rsquo;s next?</h2></a><p>Telegram Bot is just one way to integrate Make scenarios. In the case of the AI Assistant, it works great for everyday chatting, but for some actions, I recommend attaching them to other Shortcuts or Keyboard Maestro macros. Moreover, on iOS, thanks to the
<a href=https://www.macstories.net/reviews/lockflow-a-simple-way-to-add-shortcuts-to-the-ios-16-lock-screen/ rel=noopener>LockFlow app</a>, we can also add our Shortcut to the LockScreen to make it even easier to use our bot. Thus, in practice, we can enjoy almost full integration of the operating system with GPT and our Assistant.</p><a href=#resources><h2 id=resources><span class=hanchor arialabel=Anchor># </span>Resources</h2></a><ul><li><a href=https://sarafian.github.io/low-code/2020/03/24/create-private-telegram-chatbot.html rel=noopener>Create Private Telegram Chatbot</a></li></ul><hr><p>* any resemblance to persons or names is accidental, <del>suck it Nintendo</del> üòÖ</p></article><hr><div class=directories><h3>index<span>_</span></h3><div class=items><div class=item><a href=https://koscielniak.pro/ai/telegram-make-bot/ class=file data-src=/ai/telegram-make-bot/>Telegram Bot + Make as an interface for the AI assistant.md</a></div></div></div><div class=page-end id=footer><div class=backlinks-container><h3>backlinks_</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>knowledge graph_</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://koscielniak.pro/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>crafted by kkoscielniak. built using <a href=https://github.com/jackyzha0/quartz>quartz</a></p><ul><li><a href=https://koscielniak.pro>Home</a></li><li><a href=https://instagram.com/pankoscielniak>insta</a></li><li><a href=https://github.com/kkoscielniak>github</a></li></ul></footer></div></div></body></html>